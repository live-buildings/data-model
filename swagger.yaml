---
openapi: "3.0.3"
info:
  description: |
    LiveBuildings data model
  title: LiveBuildings data model
  version: "0.0.1"

components:
  schemas:

    floorMeasurement:
      description: 'The floor measurements of a Zone, typically a Building, or Storey.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#floorMeasurement
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        subl:
          description: 'Notion Française: Surface Utile Brute Locative'
          type: number
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#subl
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        subla:
          description: 'Notion Française: Surface Utile Brute Locative Amenageable'
          type: number
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#subla
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        sublt:
          description: 'Notion Française: Surface Utile Brute Locative Tertiaire'
          type: number
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#sublt
            uri-prefix: https://live-buildings.github.io/data-model/terms#

    PostalAddress:
      description: 'The mailing address of the item'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/PostalAddress
        uri-prefix: https://schema.org/
        model: https://schema.org/address
        type: Property
      properties:
        addressCountry:
          description: 'Property. The country. For example, Spain. Model:''https://schema.org/addressCountry''. In french: ''Pays'''
          type: string
        addressRegion:
          description: 'Property. The region in which the department is, and which is in the country. Model:''https://schema.org/addressRegion''. In french: ''Region'''
          type: string
        addressDepartment:
          description: 'Property. The department in which the locality is, and which is in the region. In french: ''Departement'''
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#addressDepartment
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        addressLocality:
          description: 'Property. The locality in which the street address is, and which is in the region. Model:''https://schema.org/addressLocality''. In french: ''Commune'''
          type: string
        postOfficeBoxNumber:
          description: 'Property. The post office box number for PO box addresses. For example, 03578. Model:''https://schema.org/postOfficeBoxNumber'''
          type: string
        postalCode:
          description: 'Property. The postal code. For example, 24004. Model:''https://schema.org/https://schema.org/postalCode''. In french: ''Code Postal'''
          type: string
        streetAddress:
          description: 'Property. The street address. Model:''https://schema.org/streetAddress''. In french: ''Numero et rue'''
          type: string

    containedIn:
      description: 'The basic containment relation between a place and one that contains it.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/containedIn
        uri-prefix: https://schema.org/
        type: Property
      properties:
        country:
          description: 'Relationship. The country the item is contained in. For example: "urn:AdministrativeArea:Country:FR". Model:''https://schema.org/country''.'
          type: string
        countrySubdivision:
          description: 'Relationship. One or several (an array of) administrative subdivision of a Country the item is contained in. E.g: "urn:AdministrativeArea:CountrySubdivision:FR:FranceEntiere"'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#countrySubdivision
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        region:
          description: 'Relationship. The region the item is contained in. Typically, a region contains a department, and is contained in a country and/or some countrySubdivision(s). Model:''https://schema.org/addressRegion''.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#region
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        department:
          description: 'Relationship. The department the item is contained in. Typically, a department contains a locality and is contained in a region.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#department
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        locality:
          description: 'Relationship. The locality the item is contained in. Typically, a locality contains streets and sites, and is contained in a department. In french: ''Commune'''
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#locality
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        site:
          description: 'Relationship. The bot:Site(s) the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#site
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        building:
          description: 'Relationship. The Building the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#building
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        storey:
          description: 'Relationship. The Storey or Floor the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#storey
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        territorialRealEstateDivision:
          description: 'Relationship. The territotial real-estate division or department the item is contained in. This is typically a company internal administrative area. E.g: "urn:AdministrativeArea:orange:dit:IDF"'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#territorialRealEstateDivision
            uri-prefix: https://live-buildings.github.io/data-model/terms#

    Location:
      description: 'Geojson reference to the item. It can be Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon'
      type: object
      x-ngsi:
        uri: https://uri.etsi.org/ngsi-ld/location
        type: GeoProperty
      oneOf:
        - description: GeoProperty. Geojson reference to the item. Point
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                type: number
              minItems: 2
              type: array
            type:
              enum:
                - Point
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON Point
          type: object
        - description: GeoProperty. Geojson reference to the item. LineString
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  type: number
                minItems: 2
                type: array
              minItems: 2
              type: array
            type:
              enum:
                - LineString
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON LineString
          type: object
        - description: GeoProperty. Geojson reference to the item. Polygon
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  items:
                    type: number
                  minItems: 2
                  type: array
                minItems: 4
                type: array
              type: array
            type:
              enum:
                - Polygon
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON Polygon
          type: object
        - description: GeoProperty. Geojson reference to the item. MultiPoint
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  type: number
                minItems: 2
                type: array
              type: array
            type:
              enum:
                - MultiPoint
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON MultiPoint
          type: object
        - description: GeoProperty. Geojson reference to the item. MultiLineString
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  items:
                    type: number
                  minItems: 2
                  type: array
                minItems: 2
                type: array
              type: array
            type:
              enum:
                - MultiLineString
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON MultiLineString
          type: object
        - description: GeoProperty. Geojson reference to the item. MultiLineString
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  items:
                    items:
                      type: number
                    minItems: 2
                    type: array
                  minItems: 4
                  type: array
                type: array
              type: array
            type:
              enum:
                - MultiPolygon
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON MultiPolygon
          type: object

    Thing:
      description: 'The most generic type of item.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/Thing
        uri-prefix: https://schema.org/
      required:
        - id
        - type
      properties:
        id:
          anyOf:
            - description: 'Property. Identifier format of any NGSI entity'
              maxLength: 256
              minLength: 1
              pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
              type: string
            - description: 'Property. Identifier format of any NGSI entity'
              format: uri
              type: string
          description: 'Unique identifier of the entity'
          x-ngsi:
            type: Property
        type:
          description: 'NGSI Entity type'
          enum:
            - Building
          type: string
          x-ngsi:
            type: Property
        shortId:
          description: 'A short id of this item. Typically an UID that uniquely identifies this item among all items of same type.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            type: Property
            uri: https://live-buildings.github.io/data-model/terms#shortId
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        name:
          description: 'The name of this item.'
          type: string
          x-ngsi:
            type: Property
            uri: https://schema.org/name
        shortName:
          description: 'A short name for this item. Typically for display purpose.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            type: Property
            uri: https://live-buildings.github.io/data-model/terms#shortName
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        alternateName:
          description: 'An alternative name for this item'
          type: string
          x-ngsi:
            uri: https://schema.org/alternateName
            type: Property
        location:
          $ref: "#/components/schemas/Location"
        category:
          description: 'Category of the item. '
          items:
            type: string
          type: array
          x-ngsi:
            type: Property
            uri: https://schema.org/category
        description:
          description: 'A description of this item'
          type: string
          x-ngsi:
            type: Property
            uri: https://schema.org/description
        source:
          description: 'A sequence of characters giving the original source of the entity data as a URL. Recommended to be the fully qualified domain name of the source provider, or the URL to the source object.'
          type: string
          x-ngsi:
            type: Property
            uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/source
        dataProvider:
          description: 'A sequence of characters identifying the provider of the harmonised data entity.'
          type: string
          x-ngsi:
            uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/dataProvider
            type: Property
        additionalProperty:
          description: 'A property-value pair representing an additional characteristic of the entity, e.g. a product feature or another characteristic for which there is no matching property.'
          type: string
          x-ngsi:
            uri: https://schema.org/additionalProperty
            type: Property
        url:
          description: 'URL which provides a description or further information about this item.'
          format: uri
          type: string
          x-ngsi:
            uri: https://schema.org/url
            type: Property

    Zone:
      description: 'A part of the physical world or a virtual world that is inherently both located in this world and has a 3D spatial extent; Sub-classes of bot:Zone include bot:Site, bot:Building, bot:Storey, or bot:Space. An instance of bot:Zone can contain other bot:Zone instances, making it possible to group or subdivide zones. An instance of bot:Zone can be adjacent to or intersecting other bot:Zone instances.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Zone
        uri-prefix: https://w3id.org/bot#
      allOf:
        - $ref: '#/components/schemas/Thing'
        - type: object
          properties:
            address:
              $ref: "#/components/schemas/PostalAddress"
            containedIn:
              $ref: "#/components/schemas/containedIn"
            floorMeasurement:
              $ref: "#/components/schemas/floorMeasurement"
            peopleCapacity:
              description: 'Allowed people present at the place.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleCapacity
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            peopleOccupancy:
              description: 'Number of people present at the place. Compared to other peopleOccupancy* estimates, this one should be the most accurate.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleOccupancy
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            peopleOccupancyAccessControlView:
              description: 'Number of people present at the place, from an access control system point of view. Typically an estimate based on the number of people who have used their access badge to enter the place.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleOccupancyAccessControlView
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            peopleOccupancyIPNetworkView:
              description: 'Number of people present at the place, from an IP network point of view. Typically an estimate on the basis of the number of IP connections on the place''s network.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleOccupancyIPNetworkView
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            refMap:
              anyOf:
                - description: Property. Identifier format of any NGSI entity
                  maxLength: 256
                  minLength: 1
                  pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
                  type: string
                - description: Property. Identifier format of any NGSI entity
                  format: uri
                  type: string
              description: Reference to the map containing the item.
              x-ngsi:
                type: Relationship
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/refMap
            owner:
              description: 'A List containing a JSON encoded sequence of characters referencing the unique Ids of the owner(s)'
              items:
                type: string
                description: Property. Unique identifier of the entity
              type: array
              x-ngsi:
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/owner
            occupier:
              description: 'Person or entity using the place.'
              items:
                type: string
                description: Property. Unique identifier of the entity
              type: array
              x-ngsi:
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/occupier
            employeeCount:
              description: 'Number of employees attached to this place.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#employeeCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            individualWorkstationCount:
              description: 'Number of individual workstations available in this place. An individual workstation is a workstation assigned or dedicated to a particular person.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#individualWorkstationCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            flexWorkstationCount:
              description: 'Number of flex workstations available in this place. A flex workstation is a workstation that is not assigned or dedicated to a particular person, and can be used alternatively by different people.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#flexWorkstationCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            openingHours:
              description: 'Opening hours of this place.'
              items:
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/openingHours
            outdoorParkingSpacesCount:
              description: 'Number of outdoor parking spaces available at this place.'
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#outdoorParkingSpacesCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            indoorParkingSpacesCount:
              description: 'Number of indoor parking spaces available at this place.'
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#indoorParkingSpacesCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#

    AdministrativeArea:
      description: 'A geographical region, typically under the jurisdiction of a particular government, or company.'
      type: object
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/AdministrativeArea
        uri-prefix: https://schema.org/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. Enum TODO'
              items:
                enum:
                  - InternationalOrganization
                  - Country
                  - CountrySubdivision
                  - Region
                  - Department
                  - EPCI
                  - Locality
                  - IRIS
                  - Tile50
                  - Tile100
                  - Tile250
                  - TileINSEE200
                  - TileINSEE1000
                  - TerritorialRealEstateDivision
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category

    Organization:
      description: 'An organization such as a school, NGO, corporation, club, etc, mapped from schema.org'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/Organization
        uri-prefix: https://schema.org/
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Thing'
        - type: object
          properties:
            address:
              $ref: "#/components/schemas/PostalAddress"
            legalName:
              description: 'The official name of the organization, e.g. the registered company name.'
              type: string
              x-ngsi:
                uri: https://schema.org/legalName
                type: Property
            owner:
              description: 'A List containing a JSON encoded sequence of characters referencing the unique Ids of the owner(s)'
              items:
                type: string
                description: Property. Unique identifier of the entity
              type: array
              x-ngsi:
                uri: https://smartdatamodels.org/owner
                type: Property
            taxID:
              description: 'The Tax / Fiscal ID of the organization or person, e.g. the TIN in the US or the CIF/NIF in Spain.'
              type: string
              x-ngsi:
                uri: https://schema.org/taxID
                type: Property
            headOffice:
              description: 'Relationship to the head office Building of the organization.'
              format: uri
              type: string
              x-lb-terms:
                enabled: true
              x-ngsi:
                uri: https://live-buildings.github.io/data-model/terms#hasHeadOffice
                uri-prefix: https://live-buildings.github.io/data-model/terms#
                type: Relationship

    Site:
      description: 'A part of the physical world or a virtual world that is inherently both located in this world and having a 3D spatial extent. It is intended to contain or contains one or more buildings.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Site
        uri-prefix: https://w3id.org/bot#
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. Enum:''commercial, industrial, office, parking, residential, retail, service, technical, warehouse'''
              items:
                enum:
                  - commercial
                  - industrial
                  - office
                  - parking
                  - residential
                  - retail
                  - service
                  - technical
                  - warehouse
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category

    Building:
      description: 'An independent unit of the built environment with a characteristic spatial structure, intended to serve at least one function or user activity [ISO-12006]. A bot:Building is a part of the physical world or a virtual world that is inherently both located in this world and having a 3D spatial extent, is contained in a building site, and can contain one or more storeys that are vertically connected.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Building
        uri-prefix: https://w3id.org/bot#
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. Enum:''commercial, industrial, office, parking, residential, retail, service, technical, warehouse'''
              items:
                enum:
                  - commercial
                  - industrial
                  - office
                  - parking
                  - residential
                  - retail
                  - service
                  - technical
                  - warehouse
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category
            floorsAboveGround:
              description: 'Floors above the ground level'
              type: number
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/floorsAboveGround
            floorsBelowGround:
              description: 'Floors below the ground level'
              type: number
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/floorsBelowGround

    Storey:
      description: 'A part of the physical world or a virtual world that is inherently both located in this world and having a 3D spatial extent. A bot:Storey is contained in one or more buildings, and is intended to contain one or more spaces that are horizontally connected. Storeys of a building are connected by means of vertical connections such as elevators and stairs. A bot:Storey encompasses both zones above and below ground, for example, a building with 21 floors above ground, one ground floor and 3 basements is equal to the sentence: A building has 25 instances of bot:Storey.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Storey
        uri-prefix: https://w3id.org/bot#
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. TODO'
              items:
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category

paths:
  /ngsi-ld/v1/entities:
    get:
      description: "Retrieve a set of entities which matches a specific query from an NGSI-LD system"
      parameters:
        - in: query
          name: type
          required: true
          schema:
            enum:
              - Thing
            type: string
      responses:
        "200":
          description: OK
      tags:
        - ngsi-ld
