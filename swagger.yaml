---
openapi: "3.0.3"
info:
  description: |
    LiveBuildings data model
  title: LiveBuildings data model
  version: "0.0.1"

components:
  schemas:

    TimeProperties:
      description: |
        Some cross-domain time properties.<br/>
        Mutually exclusive : 
        - `period` (ISO 8601) for predefined intervals
        - `periodBeginning` + `periodDuration` for custom intervals
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#TimeProperties
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        period:
          description: |
            A specific time period represented as a partial or complete date/time in ISO 8601 format.<br/>
            It can cover variable granularity depending on the context:<br/>
            - Full year: '2025'
            - Full month: '2025-04'
            - Full day: '2025-04-07'
            - Specific hour: '2025-04-07T12'
            - Specific minute: '2025-04-07T12:30'
            - Specific second: '2025-04-07T12:30:45'
            
            This self-contained period replaces the need to use both periodBeginning and periodDuration when referring to fixed/predefined time frames (e.g., calendar days, months, or years). <br/>
            Use periodBeginning/periodDuration only when needing to describe custom intervals with specific start points and durations.
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#period
            uri-prefix: https://live-buildings.github.io/data-model/terms#

        periodDuration:
          description: 'A duration of time given in ISO 8601 format. E.g ''P1D'' for a duration of 1 day, or ''P1Y3M5DT7H10M'' for 1 year 3 months 5 days 7 hours and 10 minutes'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#periodDuration
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        periodBeginning:
          description: 'The beginning date and time of a period of time.'
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#periodBeginning
            uri-prefix: https://live-buildings.github.io/data-model/terms#

    UserProperties:
      description: 'Some cross-domain user-related properties.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#UserProperties
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        userId:
          description: 'The identifier (anonymised or not) of the user associated with the observed event, if any. E.g. for a people flow observed through an access control system: the id of the access control system user.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#userId
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property
        userProfile:
          description: 'The profile of the user associated with the observed event, if any. E.g. for a people flow observed through an access control system: the profile of the access control system user.'
          type: string
          enum:
            - R
            - N
            - E
            - V
            - R|N
            - R|N|E
            - R|N|E|V
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#userProfile
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property
        userCompany:
          description: 'The company of the user associated with the observed event, if any.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#userCompany
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property
        userService:
          description: 'The service (in the user company) of the user associated with the observed event, if any.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#userService
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property

    EventProperties:
      description: 'Some cross-domain event-related properties.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#EventProperties
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        eventType:
          description: 'The type of the observed event, if any. E.g. for a people flow observed through an access control system, the event type used by the ACS to depict this event.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#eventType
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property
        eventMessage:
          description: 'The message associated with the observed event, if any. E.g. for a people flow observed through an access control system, the message used by the ACS, to describe this event.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#eventMessage
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property
        eventDirection:
          description: 'The direction of the observed event, if any. E.g. for a people flow observed through an access control system, people can be allowed to get in or out a place.'
          type: string
          enum:
            - In
            - Out
            - In|Out
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#eventDirection
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property

    TraceabilityCoreProperties:
      description: 'Some cross-domain core traceability properties.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#TraceabilityCoreProperties
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        source:
          description: 'A sequence of characters giving the original source of the entity data as a URL. Recommended to be the fully qualified domain name of the source provider, or the URL to the source object.'
          type: string
          x-ngsi:
            type: Property
            uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/source
        dataProvider:
          description: 'A sequence of characters identifying the provider of the harmonised data entity.'
          type: string
          x-ngsi:
            uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/dataProvider
            type: Property
        dataProviderDevice:
          description: 'The data provider device. In the case of a data being prodided by a system that manages devices, dataProvider depicts the system, whereas dataProviderDevice depicts the device.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#dataProviderDevice
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property
        dataProviderPoint:
          description: 'The data provider point. In the case of a data being prodided by a system or device that manages points, dataProvider depicts the system, dataProviderDevice depicts the device, and dataProviderPoint depicts the point.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#dataProviderPoint
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property

    TraceabilityProperties:
      description: 'Some cross-domain traceability properties.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#TraceabilityProperties
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      allOf:
        - $ref: '#/components/schemas/TraceabilityCoreProperties'
        - type: object
          properties:
            dataProviderLastUpdateDate:
              description: 'The date on which the entity was last updated from the data provider perspective.'
              type: string
              format: date-time
              x-lb-terms:
                enabled: true
              x-ngsi:
                uri: https://live-buildings.github.io/data-model/terms#dataProviderLastUpdateDate
                uri-prefix: https://live-buildings.github.io/data-model/terms#
                type: Property

    InseeProperties:
      description: "Some INSEE notions to be used as values of 'additionalProperties' of AdministrativeArea(s) representing an INSEE area such as a France region or department"
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#InseeProperties
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        inseeGeographie:
          description: 'Date of the insee geographie from which the AdministrativeArea is based on. Indeed, the list of France regions, departments, localities, etc can change from time to time. The INSEE publish at least one geographie per year'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeGeographie
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeGeographieRef:
          description: 'URL of the insee Geographie reference this AdministrativeArea is based on.'
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeGeographieRef
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeREG:
          description: "INSEE 'Code Région'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeREG
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeCHEFLIEU:
          description: 'INSEE identifier of the main locality of a Region.'
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeCHEFLIEU
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeTNCC:
          description: "INSEE 'Type de nom en clair'. Refers to NCC, NCCENR, LIBELLE"
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeTNCC
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeNCC:
          description: "INSEE 'Nom en clair (majuscules)'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeNCC
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeNCCENR:
          description: "INSEE 'Nom en clair (typographie riche)'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeNCCENR
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeLIBELLE:
          description: "INSEE 'Nom en clair (typographie riche) avec article'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeLIBELLE
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeTYPECOM:
          description: "INSEE 'Type de commune'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeTYPECOM
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeCOM:
          description: "INSEE 'Code commune'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeCOM
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeDEP:
          description: "INSEE 'Code département'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeDEP
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeARR:
          description: "INSEE 'Code arrondissement'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeARR
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeCAN:
          description: "INSEE 'Code canton. Pour les communes « multi-cantonales » code décliné de 99 à 90 (pseudo-canton) ou de 89 à 80 (communes nouvelles)'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeCAN
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        inseeCOMPARENT:
          description: "INSEE 'Code de la commune parente pour les arrondissements municipaux et les communes associées ou déléguées'."
          type: string
          format: date-time
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#inseeCOMPARENT
            uri-prefix: https://live-buildings.github.io/data-model/terms#

    ObservationCoreProperties:
      type: object
      description: Core properties of an observation.
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#ObservationCoreProperties
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      required: [observedAt,value]
      allOf:
        - type: object
          properties:
            observedAt:
              description: 'The standard NGSI-LD observedAt property defined as the temporal Property at which a certain Property or Relationship became valid or was observed. For example, a temperature Value was measured by the sensor at this point in time. '
              type: string
              format: date-time
              x-ngsi:
                uri: "https://uri.etsi.org/ngsi-ld/observedAt"
            value:
              description: 'Observed value.'
              type: number
              x-ngsi:
                uri: "https://uri.etsi.org/ngsi-ld/hasValue"
            unitCode:
              description: |
                Value''s unit code. 
                Should be one of the measurement unit code in UN/ECE Recommendation 20 if available : 'https://unece.org/fileadmin/DAM/cefact/recommendations/rec20/rec20_rev3_Annex3e.pdf`. <br/>
                Examples:
                | Code  | Description                          | 
                |-------|--------------------------------------|
                | KGM   | Kilogram                             |
                | MTR   | Meter                                |
                | MTQ   | Cubic metre                          |
                | KWH   | Kilowatt hour                        |
              type: string
              example: 'KWH'
              x-ngsi:
                uri: "https://uri.etsi.org/ngsi-ld/unitCode"

    floorMeasurement:
      description: 'The floor measurements of a Zone, typically a Building, or Storey.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#floorMeasurement
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        subl:
          description: 'Notion Française: Surface Utile Brute Locative'
          type: number
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#subl
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        subla:
          description: 'Notion Française: Surface Utile Brute Locative Amenageable'
          type: number
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#subla
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        sublt:
          description: 'Notion Française: Surface Utile Brute Locative Tertiaire'
          type: number
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#sublt
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        sun:
          description: 'Net Usable Area'
          type: number
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#netUsableArea
            uri-prefix: https://live-buildings.github.io/data-model/terms#

    address:
      description: 'The mailing address of the item'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/PostalAddress
        uri-prefix: https://schema.org/
        model: https://schema.org/address
        type: Property
      properties:
        addressCountry:
          description: 'Property. The country. For example, Spain. Model:''https://schema.org/addressCountry''. In french: ''Pays'''
          type: string
        addressRegion:
          description: 'Property. The region in which the department is, and which is in the country. Model:''https://schema.org/addressRegion''. In french: ''Region'''
          type: string
        addressDepartment:
          description: 'Property. The department in which the locality is, and which is in the region. In french: ''Departement'''
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#addressDepartment
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        addressLocality:
          description: 'Property. The locality in which the street address is, and which is in the region. Model:''https://schema.org/addressLocality''. In french: ''Commune'''
          type: string
        postOfficeBoxNumber:
          description: 'Property. The post office box number for PO box addresses. For example, 03578. Model:''https://schema.org/postOfficeBoxNumber'''
          type: string
        postalCode:
          description: 'Property. The postal code. For example, 24004. Model:''https://schema.org/https://schema.org/postalCode''. In french: ''Code Postal'''
          type: string
        streetAddress:
          description: 'Property. The street address. Model:''https://schema.org/streetAddress''. In french: ''Numero et rue'''
          type: string

    containedIn:
      description: |
        Defines the hierarchical geographic containment of this entity,
        specifying the place(s) in which it is located. (e.g., country, region, or building).
        The `containedIn` object allows for specifying containment at
        multiple levels, such as country, region, and locality. The most
        specific level should be provided when available.  If there
        are multiple relevant countrySubdivisions, provide them as an array.<br/>
        <br/>
        Note: This property represents a *spatial* or *administrative* containment,
        not necessarily a physical one.
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/containedIn
        uri-prefix: https://schema.org/
        type: Property
      properties:
        country:
          description: 'Relationship to an <a href="https://live-buildings.github.io/data-model/terms#schema.org/AdministrativeArea">AdministrativeArea</a>. The country the item is contained in. For example: "urn:AdministrativeArea:Country:FR". Model:''https://schema.org/country''.'
          type: string
        countrySubdivision:
          description: 'Relationship to one or several <a href="https://live-buildings.github.io/data-model/terms#schema.org/AdministrativeArea">AdministrativeArea(s)</a>. One or several (an array of) administrative subdivision of a Country the item is contained in. E.g: "urn:AdministrativeArea:CountrySubdivision:FR:FranceEntiere"'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#countrySubdivision
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        region:
          description: 'Relationship. The region the item is contained in. Typically, a region contains a department, and is contained in a country and/or some countrySubdivision(s). Model:''https://schema.org/addressRegion''.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#region
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        department:
          description: 'Relationship. The department the item is contained in. Typically, a department contains a locality and is contained in a region.'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#department
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        locality:
          description: 'Relationship. The locality the item is contained in. Typically, a locality contains streets and sites, and is contained in a department. In french: ''Commune'''
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#locality
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        campus:
          description: 'Relationship. The campus (a particular Site which is a group of Site(s)) the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#campus
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        site:
          description: 'Relationship to one or several <a href="https://live-buildings.github.io/data-model/terms#w3id.org/Site">Site(s)</a>. The bot:Site(s) the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#site
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        building:
          description: 'Relationship to a <a href="https://live-buildings.github.io/data-model/terms#w3id.org/Building">Building</a>. The bot:Building the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#building
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        storey:
          description: 'Relationship to a <a href="https://live-buildings.github.io/data-model/terms#w3id.org/Storey">Storey</a>. The bot:Storey or Floor the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#storey
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        space:
          description: 'Relationship to a <a href="https://live-buildings.github.io/data-model/terms#w3id.org/Space">Space</a>. The bot:Space the item is contained in'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#space
            uri-prefix: https://live-buildings.github.io/data-model/terms#
        territorialRealEstateDivision:
          description: 'Relationship to an <a href="https://live-buildings.github.io/data-model/terms#schema.org/AdministrativeArea">AdministrativeArea</a>. The territotial real-estate division or department the item is contained in. This is typically a company internal administrative area. E.g: "urn:AdministrativeArea:orange:dit:IDF"'
          type: string
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#territorialRealEstateDivision
            uri-prefix: https://live-buildings.github.io/data-model/terms#

    location:
      description: 'Geojson reference to the item. It can be Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon'
      type: object
      x-ngsi:
        uri: https://uri.etsi.org/ngsi-ld/location
        type: GeoProperty
      oneOf:
        - description: GeoProperty. Geojson reference to the item. Point
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                type: number
              minItems: 2
              type: array
            type:
              enum:
                - Point
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON Point
          type: object
        - description: GeoProperty. Geojson reference to the item. LineString
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  type: number
                minItems: 2
                type: array
              minItems: 2
              type: array
            type:
              enum:
                - LineString
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON LineString
          type: object
        - description: GeoProperty. Geojson reference to the item. Polygon
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  items:
                    type: number
                  minItems: 2
                  type: array
                minItems: 4
                type: array
              type: array
            type:
              enum:
                - Polygon
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON Polygon
          type: object
        - description: GeoProperty. Geojson reference to the item. MultiPoint
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  type: number
                minItems: 2
                type: array
              type: array
            type:
              enum:
                - MultiPoint
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON MultiPoint
          type: object
        - description: GeoProperty. Geojson reference to the item. MultiLineString
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  items:
                    type: number
                  minItems: 2
                  type: array
                minItems: 2
                type: array
              type: array
            type:
              enum:
                - MultiLineString
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON MultiLineString
          type: object
        - description: GeoProperty. Geojson reference to the item. MultiLineString
          properties:
            bbox:
              items:
                type: number
              minItems: 4
              type: array
            coordinates:
              items:
                items:
                  items:
                    items:
                      type: number
                    minItems: 2
                    type: array
                  minItems: 4
                  type: array
                type: array
              type: array
            type:
              enum:
                - MultiPolygon
              type: string
          required:
            - type
            - coordinates
          title: GeoJSON MultiPolygon
          type: object

    Thing:
      description: 'The most generic type of item.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/Thing
        uri-prefix: https://schema.org/
      required:
        - id
        - type
      allOf:
        - $ref: '#/components/schemas/TraceabilityProperties'
        - type: object
          properties:
            id:
              anyOf:
                - description: 'Property. Identifier format of any NGSI entity'
                  maxLength: 256
                  minLength: 1
                  pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
                  type: string
                - description: 'Property. Identifier format of any NGSI entity'
                  format: uri
                  type: string
              description: 'Unique identifier of the entity'
              x-ngsi:
                type: Property
            type:
              description: 'NGSI Entity type'
              enum:
                - Building
              type: string
              x-ngsi:
                type: Property
            shortId:
              description: 'A short id of this item. Typically an UID that uniquely identifies this item among all items of same type.'
              type: string
              x-lb-terms:
                enabled: true
              x-ngsi:
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#shortId
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            name:
              description: 'The name of this item.'
              type: string
              x-ngsi:
                type: Property
                uri: https://schema.org/name
            shortName:
              description: 'A short name for this item. Typically for display purpose.'
              type: string
              x-lb-terms:
                enabled: true
              x-ngsi:
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#shortName
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            alternateName:
              description: 'An alternative name for this item'
              type: string
              x-ngsi:
                uri: https://schema.org/alternateName
                type: Property
            location:
              $ref: "#/components/schemas/location"
            category:
              description: 'Category of the item. '
              items:
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category
            description:
              description: 'A description of this item'
              type: string
              x-ngsi:
                type: Property
                uri: https://schema.org/description
            additionalProperty:
              description: 'A property-value pair representing an additional characteristic of the entity, e.g. a product feature or another characteristic for which there is no matching property.'
              type: string
              x-ngsi:
                uri: https://schema.org/additionalProperty
                type: Property
            url:
              description: 'URL which provides a description or further information about this item.'
              format: uri
              type: string
              x-ngsi:
                uri: https://schema.org/url
                type: Property

    Zone:
      description: 'A part of the physical world or a virtual world that is inherently both located in this world and has a 3D spatial extent; Sub-classes of bot:Zone include bot:Site, bot:Building, bot:Storey, or bot:Space. An instance of bot:Zone can contain other bot:Zone instances, making it possible to group or subdivide zones. An instance of bot:Zone can be adjacent to or intersecting other bot:Zone instances.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Zone
        uri-prefix: https://w3id.org/bot#
      allOf:
        - $ref: '#/components/schemas/Thing'
        - type: object
          properties:
            address:
              $ref: "#/components/schemas/address"
            containedIn:
              $ref: "#/components/schemas/containedIn"
            floorMeasurement:
              $ref: "#/components/schemas/floorMeasurement"
            peopleCapacity:
              description: 'Allowed people present at the place.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleCapacity
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            peopleOccupancy:
              description: 'Number of people present at the place. Compared to other peopleOccupancy* estimates, this one should be the most accurate.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleOccupancy
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            peopleOccupancyAccessControlView:
              description: 'Number of people present at the place, from an access control system point of view. Typically an estimate based on the number of people who have used their access badge to enter the place.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleOccupancyAccessControlView
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            peopleOccupancyIPNetworkView:
              description: 'Number of people present at the place, from an IP network point of view. Typically an estimate on the basis of the number of IP connections on the place''s network.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#peopleOccupancyIPNetworkView
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            refMap:
              anyOf:
                - description: Property. Identifier format of any NGSI entity
                  maxLength: 256
                  minLength: 1
                  pattern: ^[\w\-\.\{\}\$\+\*\[\]`|~^@!,:\\]+$
                  type: string
                - description: Property. Identifier format of any NGSI entity
                  format: uri
                  type: string
              description: Reference to the map containing the item.
              x-ngsi:
                type: Relationship
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/refMap
            owner:
              description: 'A List containing a JSON encoded sequence of characters referencing the unique Ids of the owner(s)'
              items:
                type: string
                description: Property. Unique identifier of the entity
              type: array
              x-ngsi:
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/owner
            occupier:
              description: 'Person or entity using the place.'
              items:
                type: string
                description: Property. Unique identifier of the entity
              type: array
              x-ngsi:
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/occupier
            employeeCount:
              description: 'Number of employees attached to this place.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#employeeCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            individualWorkstationCount:
              description: 'Number of individual workstations available in this place. An individual workstation is a workstation assigned or dedicated to a particular person.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#individualWorkstationCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            flexWorkstationCount:
              description: 'Number of flex workstations available in this place. A flex workstation is a workstation that is not assigned or dedicated to a particular person, and can be used alternatively by different people.'
              minimum: 0
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#flexWorkstationCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            openingHours:
              description: 'Opening hours of this place.'
              items:
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/openingHours
            yearBuilt:
              description: 'The year an Accommodation was constructed. This corresponds to the YearBuilt field in RESO.'
              type: number
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://schema.org/yearBuilt
            inPropertyStockDate:
              description: 'Date of entry into the property stock.'
              type: string
              format: date-time
              x-lb-terms:
                enabled: true
              x-ngsi:
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#inPropertyStockDate
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            outPropertyStockDate:
              description: 'Exit date from the property stock.'
              type: string
              format: date-time
              x-lb-terms:
                enabled: true
              x-ngsi:
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#outPropertyStockDate
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            outdoorParkingSpaceCount:
              description: 'Number of outdoor parking spaces available at this place.'
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#outdoorParkingSpaceCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#
            indoorParkingSpaceCount:
              description: 'Number of indoor parking spaces available at this place.'
              type: number
              x-lb-terms:
                enabled: true
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://live-buildings.github.io/data-model/terms#indoorParkingSpaceCount
                uri-prefix: https://live-buildings.github.io/data-model/terms#

    AdministrativeArea:
      description: 'A geographical region, typically under the jurisdiction of a particular government, or company.'
      type: object
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/AdministrativeArea
        uri-prefix: https://schema.org/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. Enum TODO'
              items:
                enum:
                  - InternationalOrganization
                  - Country
                  - CountrySubdivision
                  - Region
                  - Department
                  - EPCI
                  - Locality
                  - IRIS
                  - Tile50
                  - Tile100
                  - Tile250
                  - TileINSEE200
                  - TileINSEE1000
                  - Campus
                  - TerritorialRealEstateDivision
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category

    Organization:
      description: 'An organization such as a school, NGO, corporation, club, etc, mapped from schema.org'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://schema.org/Organization
        uri-prefix: https://schema.org/
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Thing'
        - type: object
          properties:
            address:
              $ref: "#/components/schemas/address"
            legalName:
              description: 'The official name of the organization, e.g. the registered company name.'
              type: string
              x-ngsi:
                uri: https://schema.org/legalName
                type: Property
            owner:
              description: 'A List containing a JSON encoded sequence of characters referencing the unique Ids of the owner(s)'
              items:
                type: string
                description: Property. Unique identifier of the entity
              type: array
              x-ngsi:
                uri: https://smartdatamodels.org/owner
                type: Property
            taxID:
              description: 'The Tax / Fiscal ID of the organization or person, e.g. the TIN in the US or the CIF/NIF in Spain.'
              type: string
              x-ngsi:
                uri: https://schema.org/taxID
                type: Property
            headOffice:
              description: 'Relationship to the head office Building of the organization.'
              format: uri
              type: string
              x-lb-terms:
                enabled: true
              x-ngsi:
                uri: https://live-buildings.github.io/data-model/terms#hasHeadOffice
                uri-prefix: https://live-buildings.github.io/data-model/terms#
                type: Relationship

    Site:
      description: 'A part of the physical world or a virtual world that is inherently both located in this world and having a 3D spatial extent. It is intended to contain or contains one or more buildings.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Site
        uri-prefix: https://w3id.org/bot#
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. Enum:''commercial, industrial, office, parking, residential, retail, service, technical, warehouse'''
              items:
                enum:
                  - commercial
                  - industrial
                  - office
                  - parking
                  - residential
                  - retail
                  - service
                  - technical
                  - warehouse
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category

    Building:
      description: 'An independent unit of the built environment with a characteristic spatial structure, intended to serve at least one function or user activity [ISO-12006]. A bot:Building is a part of the physical world or a virtual world that is inherently both located in this world and having a 3D spatial extent, is contained in a building site, and can contain one or more storeys that are vertically connected.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Building
        uri-prefix: https://w3id.org/bot#
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. Enum:''commercial, industrial, office, parking, residential, retail, service, technical, warehouse'''
              items:
                enum:
                  - commercial
                  - industrial
                  - office
                  - parking
                  - residential
                  - retail
                  - service
                  - technical
                  - warehouse
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category
            floorsAboveGround:
              description: 'Floors above the ground level'
              type: number
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/floorsAboveGround
            floorsBelowGround:
              description: 'Floors below the ground level'
              type: number
              x-ngsi:
                model: https://schema.org/Number
                type: Property
                uri: https://smart-data-models.github.io/data-models/terms.jsonld#/definitions/floorsBelowGround

    Storey:
      description: 'A part of the physical world or a virtual world that is inherently both located in this world and having a 3D spatial extent. A bot:Storey is contained in one or more buildings, and is intended to contain one or more spaces that are horizontally connected. Storeys of a building are connected by means of vertical connections such as elevators and stairs. A bot:Storey encompasses both zones above and below ground, for example, a building with 21 floors above ground, one ground floor and 3 basements is equal to the sentence: A building has 25 instances of bot:Storey.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Storey
        uri-prefix: https://w3id.org/bot#
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item. TODO'
              items:
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category

    Space:
      description: 'A part of the physical world or a virtual world whose 3D spatial extent is bounded actually or theoretically, and provides for certain functions within the zone it is contained in.'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://w3id.org/bot#Space
        uri-prefix: https://w3id.org/bot#
      x-license-url: https://creativecommons.org/licenses/by/4.0/
      allOf:
        - $ref: '#/components/schemas/Zone'
        - type: object
          properties:
            category:
              description: 'Category of the item.'
              items:
                enum:
                  - meetingRoom
                  - room
                  - pod
                  - openSpace
                  - kitchen
                type: string
              type: array
              x-ngsi:
                type: Property
                uri: https://schema.org/category

    ObservationPoint:
      description: 'An observation point that ollows observing the evolution of any featureOfInterst. E.g. the electrical consumption of a building, or the flow of people entering a building'
      type: object
      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#ObservationPoint
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        featureOfInterest:
          description: 'A feature of interest represents any real world entity from which a property is measured'
          type: string
          enum:
            - ElectricityConsumption
            - GasConsumption
            - WaterConsumption
            - UrbanHeatingConsumption
            - ZoneTemperature
            - PeopleFlow
            - PeopleFlowIn
            - PeopleFlowOut
            - PeopleFlowInOut
          x-ngsi:
            type: Property
            uri: https://saref.etsi.org/core/FeatureOfInterest
        featureKind:
          description: 'Feature kinds allow to describe kinds of features of interest. E.g. for the FeatureOfInterest PeopleFlow, it can be IP, ACS (Access Ctrl System) or IOT depending on the method used to measure the PeopleFlow'
          type: string
          enum:
            - IP
            - ACS
            - IOT
          x-ngsi:
            type: Property
            uri: https://saref.etsi.org/core/FeatureKind
        measureType:
          description: 'Generic measure dimension, that indicates which measure is being given by the observation.value property'
          type: string
          enum:
            - Occurence
            - Delta
            - CountAggregation
            - DistinctCountAggregation
            - SumAggregation
            - MeanAggregation
            - BooleanAggregation
            - MinimumAggregation
            - MaximumAggregation
          x-ngsi:
            type: Property
            uri: http://purl.org/linked-data/cube#measureType
        measureProperty:
          description: 'A quality of a feature of interest that can be measured; an aspect of a feature of interest that is intrinsic to and cannot exist without the feature. Directly reflects the unit of measure'
          type: string
          enum:
            - Energy
            - FlowVolume
            - Temperature
            - People
          x-ngsi:
            type: Property
            uri: https://saref.etsi.org/core/Property
        commodity:
          description: 'A marketable item for which there is demand, but which is supplied without qualitative differentiation across a market. SAREF refers to energy commodities such as electricity, gas, coal and oil'
          type: string
          enum:
            - Electricity
            - Gas
            - Heating
            - Water
            - Coal
            - Oil
          x-ngsi:
            type: Property
            uri: https://saref.etsi.org/core/Commodity
        containedIn:
          $ref: "#/components/schemas/containedIn"
        observation:
          description: 'A particular observation or measure made by an ObservationPoint. It is typically the temporal property of the observationPoint, and may include the following meta-data : value, unitCode, dataProvider, source, periodDuration, periodBeginning, and any other meta-data qualifying this observation'
          type: object
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#observation
            uri-prefix: https://live-buildings.github.io/data-model/terms#
            type: Property
          required: [observedAt,value]
          allOf:
            - $ref: '#/components/schemas/ObservationCoreProperties'
            - $ref: '#/components/schemas/TraceabilityCoreProperties'
            - $ref: '#/components/schemas/TimeProperties'
            - $ref: '#/components/schemas/UserProperties'
            - $ref: '#/components/schemas/EventProperties'
            - type: object
              properties:
                supplyPointId:
                  description: 'Supply point identifier, in the case of an observation value provided by a supply point.'
                  type: string
                  x-lb-terms:
                    enabled: true
                  x-ngsi:
                    uri: https://live-buildings.github.io/data-model/terms#supplyPointId
                    uri-prefix: https://live-buildings.github.io/data-model/terms#
                    type: Property

    BuildingEnergyPerformanceObservationPoint:
      type: object
      description: |
        A specialized `ObservationPoint` designed to track the energy performance characteristics of a building, or site.  
        This object is particularly aligned with the Energy Performance Diagnostics (EPD, known as DPE in French) framework and includes key metrics such as:
        - **EPD Consumption**: Annual primary energy consumption in kWh/m²/year.
        - **EPD Class**: Energy efficiency rating based on EPD consumption, ranging from A (most efficient) to G (least efficient).
        - **Greenhouse Gas (GHG) Emissions**: Annual GHG emissions in kg CO₂/m²/year.
        - **GHG Class**: Rating based on GHG emissions, ranging from A (lowest emissions) to G (highest emissions).

        This observation point is self-descriptive, meaning it inherently defines its feature of interest, measurement properties, and related metadata. As such, there is no need to redundantly include these properties here.

      x-lb-terms:
        enabled: true
      x-ngsi:
        uri: https://live-buildings.github.io/data-model/terms#BuildingEnergyPerformanceObservationPoint
        uri-prefix: https://live-buildings.github.io/data-model/terms#
        type: Property
      properties:
        containedIn:
          $ref: "#/components/schemas/containedIn"
        epdConsumption:
          type: object
          description: |
            Energy Performance Diagnostics (EPD) Consumption. 
            Annual primary energy consumption in kWh/m²/year.
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#epdConsumption
            uri-prefix: https://live-buildings.github.io/data-model/terms#
          required: [observedAt,value]
          allOf:
            - $ref: '#/components/schemas/ObservationCoreProperties'
            - $ref: '#/components/schemas/TraceabilityCoreProperties'
            - $ref: '#/components/schemas/TimeProperties'
            - type: object
              properties:
                value:
                  type: number
                  format: float
                  description: |
                    Energy Performance Diagnostics (EPD) Consumption. 
                    Annual primary energy consumption in kWh/m²/year.
                  example: 250.5
                  x-ngsi:
                    uri: "https://uri.etsi.org/ngsi-ld/hasValue"
        epdClass:
          type: object
          description: |
            Energy Performance Diagnostics (EPD) Class.
            Energy efficiency rating based on the EPD consumption, ranging from A (most efficient) to G (least efficient).
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#epdClass
            uri-prefix: https://live-buildings.github.io/data-model/terms#
          required: [observedAt,value]
          allOf:
            - $ref: '#/components/schemas/ObservationCoreProperties'
            - $ref: '#/components/schemas/TraceabilityCoreProperties'
            - $ref: '#/components/schemas/TimeProperties'
            - type: object
              properties:
                value:
                  type: string
                  description: |
                    Energy Performance Diagnostics (EPD) Class.
                    Energy efficiency rating based on the EPD consumption, ranging from A (most efficient) to G (least efficient).
                  enum: [A, B, C, D, E, F, G]
                  example: D
                  x-ngsi:
                    uri: "https://uri.etsi.org/ngsi-ld/hasValue"
        ghgEmissions:
          type: object
          description: |
            Greenhouse Gas (GHG) Emissions.
            Annual greenhouse gas emissions in kg CO₂/m²/year.
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#ghgEmissions
            uri-prefix: https://live-buildings.github.io/data-model/terms#
          required: [observedAt,value]
          allOf:
            - $ref: '#/components/schemas/ObservationCoreProperties'
            - $ref: '#/components/schemas/TraceabilityCoreProperties'
            - $ref: '#/components/schemas/TimeProperties'
            - type: object
              properties:
                value:
                  type: number
                  format: float
                  description: |
                    Greenhouse Gas (GHG) Emissions.
                    Annual greenhouse gas emissions in kg CO₂/m²/year.
                  example: 60.2
                  x-ngsi:
                    uri: "https://uri.etsi.org/ngsi-ld/hasValue"
        ghgClass:
          type: object
          description: |
            Greenhouse Gas (GHG) Class.<br/>
            Rating based on greenhouse gas emissions, ranging from A (lowest emissions) to G (highest emissions).
          x-lb-terms:
            enabled: true
          x-ngsi:
            uri: https://live-buildings.github.io/data-model/terms#ghgClass
            uri-prefix: https://live-buildings.github.io/data-model/terms#
          required: [observedAt,value]
          allOf:
            - $ref: '#/components/schemas/ObservationCoreProperties'
            - $ref: '#/components/schemas/TraceabilityCoreProperties'
            - $ref: '#/components/schemas/TimeProperties'
            - type: object
              properties:
                value:
                  type: string
                  description: |
                    Greenhouse Gas (GHG) Class.<br/>
                    Rating based on greenhouse gas emissions, ranging from A (lowest emissions) to G (highest emissions).
                  enum: [A, B, C, D, E, F, G]
                  example: E
                  x-ngsi:
                    uri: "https://uri.etsi.org/ngsi-ld/hasValue"



paths:
  /ngsi-ld/v1/entities:
    get:
      description: "Retrieve a set of entities which matches a specific query from an NGSI-LD system"
      parameters:
        - in: query
          name: type
          required: true
          schema:
            enum:
              - Thing
            type: string
      responses:
        "200":
          description: OK
      tags:
        - ngsi-ld